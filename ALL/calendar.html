{% extends "base.html" %}
{% block title %}部門排程{% endblock %}
{% block header_title %}部門排程{% endblock %}

{% block extra_head %}
    <!-- FullCalendar CSS & JS 由子頁引入 -->
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.js"></script>

    <style>
      /* calendar-specific CSS (從你原始頁面帶過來) */
      .fc .fc-event-title, .fc .fc-event-time, .fc .fc-event-main { white-space: normal !important; overflow: visible !important; text-overflow: clip !important; }
      .fc .fc-daygrid-event, .fc .fc-daygrid-dot-event { white-space: normal !important; }
      .fc .fc-daygrid-event .fc-event-title, .fc .fc-daygrid-dot-event .fc-event-title, .fc .fc-timegrid-event .fc-event-title { overflow-wrap: anywhere; word-break: break-word; }
      .fc .fc-daygrid-event { display: block; padding: 2px 4px; }
      .fc .fc-daygrid-day-frame { height: 160px !important; overflow-y: auto !important; }
      .fc .fc-daygrid-day { flex: 0 0 auto !important; }
    </style>
{% endblock %}

{% block content %}
    <div class="table">
        <h2 class="calendar">部門排程</h2>
        <div id="calendar"></div>
    </div>
{% endblock %}

{% block extra_scripts %}
<script>
document.addEventListener('DOMContentLoaded', function () {
    var calendarEl = document.getElementById('calendar');
    var calendar = new FullCalendar.Calendar(calendarEl, {
        initialView: 'dayGridMonth',
        weekends: false,
        hiddenDays: [0,6],
        events: { url: '/calendar/events', method: 'GET' },
        eventDisplay: 'block',
        dayCellContent: function(arg) { return arg.dayNumberText; },
        height: 'auto',
        contentHeight: 'auto',
        dayMaxEventRows: false,
        aspectRatio: 1.35
    });
    calendar.render();
});
</script>
{% endblock %}
